<div class="container theme-light">
  <div class="left">
    <img
      src="https://static.vecteezy.com/system/resources/previews/019/879/186/large_2x/user-icon-on-transparent-background-free-png.png"
      alt=""
      class="user-img"
    />
    <span class="username">{{name}}</span>
    <span class="emotion">{{selectedHero.emotion}}</span><br />
    <div class="box">
      <div>{{relog.currProject.description()}}</div>
    </div>
    <div
      class="card"
      *ngFor="let n of projects.projects()"
      [ngStyle]="{
            'border-left' : '5px solid ' + (n.color === 1 ? 'var(--base)' : n.color === 2 ? 'var(--green)' : n.color === 3 ? 'var(--add)'  : 'var(--text)')
        }"
    >
      <div class="cardbox" (click)="handleClick(n)">
        <div>
          <div class="heading">{{n.name}}</div>
          <div>{{n.description}}</div>
        </div>
        <div>
          <img
            src="https://static.vecteezy.com/system/resources/previews/033/265/331/original/incorrect-red-mark-icon-yes-or-no-approved-declined-right-wrong-png.png"
            alt=""
            style="
              width: 40px;
              height: 40px;
              margin-left: 10px;
              margin-top: 5px;
            "
            *ngIf="n.status=='Pending'"
          />
          <img
            src="https://static.vecteezy.com/system/resources/previews/024/758/787/original/tick-tick-check-mark-tick-sign-icon-transparent-background-free-png.png"
            alt=""
            class="cardimg"
            *ngIf="n.status=='Completed'"
          />

          <img
            src="https://www.freeiconspng.com/uploads/blue-delete-button-png-29.png"
            alt=""
            (click)="handleDelete(n.id)"
            style="height: 40px; width: 50px"
          />
        </div>
      </div>
    </div>
  </div>
  <div class="mid">
    <div class="welcome-user">Hello, <span>{{name}}</span></div>
    <div style="display: flex">
      <div class="card1">
        <div style="display: flex; justify-content: center">
          <div
            class="heading"
            style="
              text-align: center;
              font-size: x-large;
              font-weight: 700;
              margin-bottom: 15px;
            "
          >
            Task Data
          </div>
          <img
            src="https://icons.veryicon.com/png/o/miscellaneous/wasteapp/refresh-348.png"
            style="
              position: absolute;
              left: 52.5%;
              top: 14%;
              width: 40px;
              height: 40px;
            "
            (click)="handleReset()"
            alt=""
          />
        </div>
        <div class="form-group">
          <label for="">Task name: </label
          ><input type="text" [(ngModel)]="relog.currtask().name" />
        </div>
        <br />
        <div class="form-group">
          <label for="">Task desc: </label
          ><input type="text" [(ngModel)]="relog.currtask().description" />
        </div>
        <br />
        <div class="form-group">
          <label for="">Status:</label>
          <input
            type="text"
            [(ngModel)]="relog.currtask().status"
          /><br /><br />
        </div>
        @if(edit()){
        <button type="submit" (click)="handleUpdateTask()">Edit</button>
        } @else{
        <button type="submit" (click)="handleUpdate()">Submit</button>
        }
      </div>
    </div>
  </div>
  <div class="right">
    <div class="project-header">
      <h2>
        Hello, <span class="project-name">{{relog.currProject.name()}}</span>
      </h2>
      <p class="project-subtitle">Manage your tasks efficiently</p>
    </div>

    <div class="search-container">
      <input
        type="text"
        placeholder="Search tasks by name or status..."
        [(ngModel)]="searchTerm"
        class="search-input"
      />
    </div>

    <div class="tasks-container">
      <h3 class="tasks-title">Your Tasks</h3>
      <div class="tasks-list">
        <div *ngFor="let task of filteredTasks" class="task-card">
          <div class="task-info">
            <h4 class="task-name">{{ task.name }}</h4>
            <p class="task-description" *ngIf="task.description">
              {{ task.description }}
            </p>
          </div>
          <div
            class="task-status"
            [ngClass]="{
            'status-pending': task.status==='Pending', 
            'status-completed': task.status==='Completed'
          }"
          >
            {{ task.status }}
          </div>
        </div>
        <div *ngIf="filteredTasks.length === 0" class="no-tasks">
          <img
            src="https://cdn-icons-png.flaticon.com/512/4076/4076478.png"
            alt="No tasks"
            class="no-tasks-icon"
          />
          <p>No matching tasks found</p>
        </div>
      </div>
    </div>
  </div>
</div>
